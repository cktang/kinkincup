<div class="ui breadcrumb">
  <a href="#" ng-click="goto('/eventSummary/' + topic.event)" class="section">{{events.$getRecord(topic.event).name}} </a>
  <div class="divider"> / </div>
  <div class="active section">{{topic.name}}</div>
</div>
<h5 class="ui sub header" ng-bind="topic.description"></h5>


<h5 class="ui header"> Vote </h5>
<div class="topic">
	<div ng-repeat="c in topic.choices"
		class="ui attached segment"
		ng-class="{'green inverted': topic.votes[local.user.$id] == c}"
		ng-click="topic.votes[local.user.$id] = c; log(c)"> 
		
		<span class="ui"
				ng-if="topic.votes[local.user.$id] == c">
		</span>
		<span class="ui horizontal circular label" 
			ng-class="{green: topic.votes[local.user.$id] == c, white: topic.votes[local.user.$id] != c}"
			ng-bind="_(topic.votes).chain().values().groupBy().value()[c].length || 0"></span>
		<span ng-bind="c"></span>

		<span style="float:right" 
			class="ui right floated mini button"> 
			<i class="ui icon lock"></i> Finalize 
		</span>

		<div style="height:10px" ng-if="_(topic.votes).chain().values().contains(c).value()"></div>
		<span ng-repeat="userId in _(topic.votes).keys()" ng-if="topic.votes[userId]==c" class="ui small orange label"  > 
			<i class="ui checkmark icon"></i>
			<span ng-bind="users.$getRecord(userId).name" ></span>
		</span>
	</div> 
</div>

<div style="margin-top:10px">
	<button class="ui button fluid" ng-click="goto('chat/' + topic.$id + '/type/topic')">Chat</button>
</div>

<div style="margin-top:10px">
	<button class="ui teal button fluid" ng-click="openNewChoiceModal()">Add New Choices</button>
</div>


<!-- newChoiceModal -->
<div class="ui modal fade" id="newChoiceModal">
      <div class="ui header">
        <h4 id="myModalLabel">New Choice</h4>
      </div>
	  
      <div class="content">
      	  <div class="form-group">
		    <div class="ui fluid input">
			    <input type="text" class="form-control" placeholder="New Choice" ng-model="newChoice">
			</div>
		  </div>
      </div>
      <div class="ui segment">
        <button type="button" class="ui close button">Cancel</button>
        <button type="button" class="ui blue close button" ng-click="saveNewChoice(newChoice)">Confirm</button>
      </div>
    </div>
  </div>
</div>